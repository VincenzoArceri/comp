set show command off .
red setCounter(0) .
erewrite <_>_</_>(generatedTop, <_>_</_>(T, (<_>_</_>(threads, <_>_</_>(thread, (<_>_</_>(k, _`(_`)('__, _`,`,_(_`(_`)('mutex_;, _`(_`)(#_(1), .KList)), _`(_`)('__, _`,`,_(_`(_`)('var_;, _`(_`)('_`,_, _`,`,_(_`(_`)(#token("Id", "x"), .KList), _`(_`)('_`,_, _`,`,_(_`(_`)(#token("Id", "y"), .KList), _`(_`)('.List`{"`,"`}, .KList)))))), _`(_`)('while`(_`)_, _`,`,_(_`(_`)(#_(true), .KList), _`(_`)('`{_`}, _`(_`)('_=_;, _`,`,_(_`(_`)(#token("Id", "x"), .KList), _`(_`)(#_(2), .KList)))))))))), k)) (<_>_</_>(env, .Map, env)) (<_>_</_>(holds, .Set, holds)) (<_>_</_>(id, _`(_`)(#_(0), .KList), id)) , thread), threads)) (<_>_</_>(genv, .Map, genv)) (<_>_</_>(store, .Map, store)) (<_>_</_>(streams, (<_>_</_>(in, __(ListItem(_`(_`)(#buffer, _`(_`)(#_(""), .KList))), .List, ListItem(_`(_`)('#istream`(_`), _`(_`)(#_(0), .KList)))), in)) (<_>_</_>(out, __(ListItem(_`(_`)('#ostream`(_`), _`(_`)(#_(1), .KList))), .List, ListItem(_`(_`)(#buffer, _`(_`)(#_(""), .KList)))), out)) , streams)) (<_>_</_>(mutex, .Map, mutex)) , T), generatedTop) .

red counter .